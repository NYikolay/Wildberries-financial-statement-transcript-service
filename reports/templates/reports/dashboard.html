{% extends 'base.html' %}
{% load static %}
{% block title %} Сводный отчёт - Commery{% endblock %}
{% load dashboard_filters %}

{% block styles %}
<link rel="stylesheet" href="{% static 'reports/css/dashboard.css' %}">
{% endblock %}

{% block content %}
<div class="container">
    <div class="main_content-wrapper">
        <div class="graphs" id="graphs-bar-wrap" data-report="{{ report.reports_by_week }}">
            <div class="graphs-bar-prewrap">
                <div class="graphs-bar-filter_wrapper" data-current-filters="{{ current_filter_data|tojson }}">
                    <div class="filter-dropdown_wrapper">
                        <button class="graphs-dropbtn" id="graphs-dropbtn">
                            <img src="{% static 'images/10179242.svg' %}" alt="" style="height: 15px; width: 15px;">
                            ПЕРИОД
                            <img src="{% static 'images/iconizer-32195.svg' %}" alt="" style="height: 8px; width: 8px;">
                        </button>
                        <div class="filter-dropdown_content">
                            <div class="filter-dropdown-items__wrapper">
                                <div class="filter-dropdown_item" id="period-filter-wrapper" data-title="{{ filters_data.ara1 }}">
                                    <h3>Период</h3>
                                    <label class="graphs-filter_label">
                                        <input
                                                type="checkbox"
                                                checked
                                                class="filter_checkbox"
                                                id="all-checkbox">
                                        <span></span>
                                        <p>Всё</p>
                                    </label>
                                    {% for filter_period in filters_data.filter_period_queryset %}
                                    <label class="graphs-filter_label">
                                        <input
                                                type="checkbox"
                                                {% if current_filter_data %}
                                                {% for filter_dict in current_filter_data %}
                                                {% if filter_period.year == filter_dict.year and filter_period.week_num in filter_dict.week_nums %}
                                                checked
                                                {% endif %}
                                                {% endfor %}
                                                {% else %}
                                                checked
                                                {% endif %}
                                                class="filter_checkbox"
                                                id="period-checkbox"
                                                data-filter-type="period"
                                                data-filter-week="{{ filter_period.week_num }}"
                                                data-filter-year="{{ filter_period.year }}">
                                        <span></span>
                                        <p>{{ filter_period.week_num }} неделя ({{ filter_period.date_from|date:'d.m.Y'}}-{{filter_period.date_to|date:'d.m.Y'}})</p>
                                    </label>
                                    {% endfor %}
                                </div>
                                <button type="button" style="align-self: flex-start; height: 10px; width: 10px;" id="close-dropdown-btn">
                                    <img src="{% static 'images/back_cross.svg'%}" alt="" style="height: 10px; width: 10px;">
                                </button>
                            </div>
                            <button type="button" class="apply-graphs-filter_btn">Применить</button>
                        </div>
                    </div>
                    <div class="change__report-wrapper">
                        <p class="current__report-text current__report-text__active">Магазин</p>
                        <label class="switch">
                            <input type="checkbox" id="change-report" class="current__report-switch__input" data-target-url="{% url 'reports:barcodes_detail' %}">
                            <span class="current__report-switch__slider"></span>
                        </label>
                        <p class="current__report-text">Товары</p>
                    </div>
                </div>
                <div class="graphs-bar-wrap">
                    <div class="graphs-bar">
                        <div class="graphs-bar__bars">
                            <div class="graphs-bar__revenue">
                                <div class="graphs-bar__profit-item-check"></div>
                            </div>
                            <div class="graphs-bar__profit">
                            </div>
                            <!--                            <div class="graphs-bar__tooltip">-->
                            <!--                                <button class="graphs-bar__tooltip-btn">?</button>-->
                            <!--                                <p class="graphs-bar__tooltip-info">-->
                            <!--                                    Короткий текст-->
                            <!--                                </p>-->
                            <!--                            </div>-->
                            <div class="graphs-bar__info">
                                <p class="graphs-bar__info-title">01.01.2023 - 07.01.2023</p>
                                <div class="graphs-bar__info-text">
                                    <p class="graphs-bar__info-string">ПРИБЫЛЬ: <span class="graphs-bar__info-span"></span></p>
                                    <p class="graphs-bar__info-string">МАРЖИНАЛЬНОСТЬ: <span class="graphs-bar__info-span"></span></p>
                                    <p class="graphs-bar__info-string">РЕНТАБЕЛЬНОСТЬ: <span class="graphs-bar__info-span"></span></p>
                                    <p class="graphs-bar__info-string">ПРОДАЖИ: <span class="graphs-bar__info-span"></span></p>
                                    <p class="graphs-bar__info-string">ВОЗВРАТЫ: <span class="graphs-bar__info-span"></span></p>
                                    <p class="graphs-bar__info-string">ВЫРУЧКА: <span class="graphs-bar__info-span"></span></p>
                                    <p class="graphs-bar__info-string">СЕБЕСТОИМОСТЬ ПРОДАЖ: <span class="graphs-bar__info-span"></span></p>
                                    <p class="graphs-bar__info-string">КОМИССИЯ: <span class="graphs-bar__info-span"></span></p>
                                    <p class="graphs-bar__info-string">ЛОГИСТИКА: <span class="graphs-bar__info-span"></span></p>
                                    <p class="graphs-bar__info-string">РАСХОДЫ WB: <span class="graphs-bar__info-span"></span></p>
                                    <p class="graphs-bar__info-string">ПРОЧИЕ РАСХОДЫ: <span class="graphs-bar__info-span"></span></p>
                                    <p class="graphs-bar__info-string">НАЛОГ: <span class="graphs-bar__info-span"></span></p>
                                </div>
                                <span class="graphs-bar__info-add"></span>
                            </div>
                        </div>

                        <div class="graphs-bar__count">

                        </div>

                        <div class="graphs-bar__legend">
                            <span class="graphs-bar__legend-item">Неделя</span>
                            <span class="graphs-bar__legend-item">Выручка</span>
                            <span class="graphs-bar__legend-item">Прибыль</span>
                        </div>
                    </div>
                </div>

                <div class="graphs-bar-update">
                    <p class="graphs-bar-update__title">Дата обновления отчета <span>{{ current_api_key.last_reports_update|date:'d.m.Y' }}</span></p>
                    <p class="graphs-bar-update__text">Обновить отчет можно на странице <a href="{% url 'reports:report_detail' last_report_date.date|date:'Y-m-d' %}" class="graphs-bar-update__link">"Список отчетов"</a></p>
                </div>
            </div>
            {% if is_unloaded_reports %}
            <div class="invalid_reports-info">
                <img src="{% static 'images/iconizer-4201973.svg' %}" alt="" style="width: 14px; height: 14px;">
                <p class="invalid_reports-text">Часть отчетов не была загружена - Wildberries передает данные частями. Вы сможете загрузить недостающие отчеты на странице <a href="{% url 'reports:report_detail' last_report_date.date|date:'Y-m-d' %}" style="text-decoration: underline">"Список отчётов"</a> через 1 минуту</p>
            </div>
            {% endif %}
            {% if incorrect_reports_ids %}
            <div class="invalid_reports-info">
                <img src="{% static 'images/iconizer-4201973.svg' %}" alt="" style="width: 14px; height: 14px;">
                <p class="invalid_reports-text">В расчетах не учтены отчеты:
                    {% if incorrect_reports_ids|length > 1 %}
                    {% for incorrect_report_id in incorrect_reports_ids %}{{ incorrect_report_id }}, {% endfor %}
                    {% else %}
                    {% for incorrect_report_id in incorrect_reports_ids %}{{ incorrect_report_id }}{% endfor %},
                    {% endif %}
                    данные, получаемые от Wildberries не читаемы. <a href="https://commery.ru/link-to-creators" target="_blank" style="text-decoration: underline">Свяжитесь с нами</a> для решения вопроса</p>
            </div>
            {% endif %}
            <div class="graphs-diog-wrap" id="graphs-diog-wrap" data-brands-share="{{ report.brands_share_in_revenue_dict }}" data-stock-share="{{ report.stocks_share_in_revenue_dict }}">
                <div class="graphs-diog">
                    <p class="graphs-diog__title">ДОЛЯ БРЕНДА В ВЫРУЧКЕ</p>

                    <div class="graphs-diog__wrap">

                        <div class="graphs-canvas-wrap">
                            <canvas class="graphs-diog__item" id="diog-left"></canvas>
                        </div>
                        <div class="graphs-diog__legend" id="graphs-diog__legend-left">
						<span class="graphs-diog__legend-text">
							<span class="graphs-diog__legend-color graphs-diog__legend-color1"></span>
							<span class="graphs-diog__legend-text-content"></span>
						</span>
                            <span class="graphs-diog__legend-text">
							<span class="graphs-diog__legend-color graphs-diog__legend-color2"></span>
							<span class="graphs-diog__legend-text-content"></span>
						</span>
                            <span class="graphs-diog__legend-text">
							<span class="graphs-diog__legend-color graphs-diog__legend-color3"></span>
							<span class="graphs-diog__legend-text-content"></span>
						</span>
                            <span class="graphs-diog__legend-text">
							<span class="graphs-diog__legend-color graphs-diog__legend-color4"></span>
							<span class="graphs-diog__legend-text-content"></span>
						</span>
                            <span class="graphs-diog__legend-text">
							<span class="graphs-diog__legend-color graphs-diog__legend-color5"></span>
							<span class="graphs-diog__legend-text-content"></span>
						</span>
                            <span class="graphs-diog__legend-text">
							<span class="graphs-diog__legend-color graphs-diog__legend-color6"></span>
							<span class="graphs-diog__legend-text-content"></span>
						</span>
                            <span class="graphs-diog__legend-text">
							<span class="graphs-diog__legend-color graphs-diog__legend-color7"></span>
							<span class="graphs-diog__legend-text-content"></span>
						</span>
                            <span class="graphs-diog__legend-text">
							<span class="graphs-diog__legend-color graphs-diog__legend-color8"></span>
							<span class="graphs-diog__legend-text-content"></span>
						</span>
                            <span class="graphs-diog__legend-text">
							<span class="graphs-diog__legend-color graphs-diog__legend-color9"></span>
							<span class="graphs-diog__legend-text-content"></span>
						</span>
                        </div>

                    </div>
                </div>

                <div class="graphs-diog">
                    <p class="graphs-diog__title">ДОЛЯ ОТГРУЗОК СО СКЛАДА В ВЫРУЧКЕ</p>


                    <div class="graphs-diog__wrap">
                        <div class="graphs-canvas-wrap">
                            <canvas class="graphs-diog__item" id="diog-right"></canvas>
                        </div>

                        <div class="graphs-diog__legend" id="graphs-diog__legend-right">
						<span class="graphs-diog__legend-text">
							<span class="graphs-diog__legend-color graphs-diog__legend-color1"></span>
							<span class="graphs-diog__legend-text-content"></span>
						</span>
                            <span class="graphs-diog__legend-text">
							<span class="graphs-diog__legend-color graphs-diog__legend-color2"></span>
							<span class="graphs-diog__legend-text-content"></span>
						</span>
                            <span class="graphs-diog__legend-text">
							<span class="graphs-diog__legend-color graphs-diog__legend-color3"></span>
							<span class="graphs-diog__legend-text-content"></span>
						</span>
                            <span class="graphs-diog__legend-text">
							<span class="graphs-diog__legend-color graphs-diog__legend-color4"></span>
							<span class="graphs-diog__legend-text-content"></span>
						</span>
                            <span class="graphs-diog__legend-text">
							<span class="graphs-diog__legend-color graphs-diog__legend-color5"></span>
							<span class="graphs-diog__legend-text-content"></span>
						</span>
                            <span class="graphs-diog__legend-text">
							<span class="graphs-diog__legend-color graphs-diog__legend-color6"></span>
							<span class="graphs-diog__legend-text-content"></span>
						</span>
                            <span class="graphs-diog__legend-text">
							<span class="graphs-diog__legend-color graphs-diog__legend-color7"></span>
							<span class="graphs-diog__legend-text-content"></span>
						</span>
                            <span class="graphs-diog__legend-text">
							<span class="graphs-diog__legend-color graphs-diog__legend-color8"></span>
							<span class="graphs-diog__legend-text-content"></span>
						</span>
                            <span class="graphs-diog__legend-text">
							<span class="graphs-diog__legend-color graphs-diog__legend-color9"></span>
							<span class="graphs-diog__legend-text-content"></span>
						</span>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="report_block">
            <div class="report_title-block">
                <h1 class="report_title">Нарастающий итог</h1>
                <p class="report_subtitle">Сумма показателей за период</p>
            </div>
            <div class="top_report-block">
                <div class="top_block-item">
                    <div class="top_block-inner">
                        <h1 class="top_block-title">{{ report.revenue_total|floatformat:0|floatformat:"-3g" }}</h1>
                        <p class="top_block-subtitle">Выручка</p>
                    </div>
                    <div class="top_block-inner">
                        <h1 class="top_block-title" style="color: #ff8364;">{{ report.profit_total|floatformat:"-3g" }}</h1>
                        <p class="top_block-subtitle">Прибыль</p>
                    </div>
                </div>
                <div class="top_block-item">
                    <div class="top_block-inner">
                        <h1 class="top_block-title">{{ report.marginality_total }}%</h1>
                        <p class="top_block-subtitle">Маржинальность</p>
                    </div>
                    <div class="top_block-inner">
                        <h1 class="top_block-title">{{ report.profitability_total }}%</h1>
                        <p class="top_block-subtitle">Рентабельность</p>
                    </div>
                </div>
            </div>
            <div class="middle_report-block">
                <div class="middle_block-item">
                    <h1 class="top_block-title">{{ report.sales_amount_total|floatformat:"-3g" }}</h1>
                    <p class="top_block-subtitle">Продажи</p>
                </div>
                <div class="middle_block-item">
                    <h1 class="top_block-title">{{ report.returns_amount_total|floatformat:"-3g" }}</h1>
                    <p class="top_block-subtitle">Возвраты</p>
                </div>
            </div>
            <div class="footer_report-block">
                <div class="footer_block-item">
                    <div class="footer_block-inner">
                        <h1 class="footer_block-title">{{ report.commission_total|floatformat:"-3g" }}</h1>
                        <p class="footer_block-subtitle">Комиссия</p>
                    </div>
                    <div class="footer_block-inner">
                        <h1 class="footer_block-title">{{ report.logistics_total|floatformat:"-3g" }}</h1>
                        <p class="footer_block-subtitle">Логистика</p>
                    </div>
                    <div class="footer_block-inner">
                        <h1 class="footer_block-title">{{ report.wb_costs_total|floatformat:"-3g" }}</h1>
                        <p class="footer_block-subtitle">Расходы вб</p>
                    </div>
                    <div class="footer_block-inner">
                        <div class="left" style="width: 96px;">
                            <h1 class="footer_block-title">{{ report.penalty_total|floatformat:"-3g" }}</h1>
                        </div>
                        <p class="footer_block-subtitle">Штрафы</p>
                    </div>
                </div>
                <div class="footer_block-item">
                    <div class="footer_block-inner">
                        <div class="footer_hint">
                            <div class="left" style="width: 96px;">
                                <h1 class="footer_block-title">{{ report.supplier_costs_total|floatformat:"-3g" }}</h1>
                            </div>
                        </div>
                        <p class="footer_block-subtitle">Расходы поставщика</p>
                    </div>
                    <div class="footer_block-inner">
                        <div class="footer_hint">
                            <div class="left">
                                <h1 class="footer_block-title">{{ report.net_costs_sum_total|floatformat:"-3g" }}</h1>
                            </div>
                        </div>
                        <p class="footer_block-subtitle">СЕБЕСТОИМОСТЬ ПРОДАЖ</p>
                    </div>
                    <div class="footer_block-inner">
                        <div class="footer_hint">
                            <div class="left" style="width: 96px;">
                                <h1 class="footer_block-title">{{ report.tax_total|floatformat:"-3g" }}</h1>
                            </div>
                        </div>
                        <p class="footer_block-subtitle">НАЛОГ</p>
                    </div>
                    <div class="footer_block-inner">
                        <div class="footer_hint">
                            <div class="left" style="width: 96px;">
                                <h1 class="footer_block-title">{{ report.additional_payment_sum_total|floatformat:"-3g" }}</h1>
                            </div>
                        </div>
                        <p class="footer_block-subtitle">Доплаты</p>
                    </div>
                </div>
            </div>
            <div class="errors_list">
                <!--                <div class="error_list_item">-->
                <!--                    <img src="{% static 'images/q_black.svg' %}" alt="" style="width: 14px; height: 14px;"><span-->
                <!--                        style="color: black;">Чтобы считалась чистая прибыль от продаж необходимо отразить расходы по продажам, себестоимость товаров и действующую на момент продаж ставку налога.</span>-->
                <!--                </div>-->
                {% if report.is_empty_reports_values %}
                <div class="error_list_item">
                    <img src="{% static 'images/iconizer-4201973.svg' %}" alt="" style="width: 14px; height: 14px;"><span>Прибыль считается некорректно - на странице "Список отчетов" не заполнены обязательные поля: Стоимость хранения, Стоимость платной приемки и Прочие удержания.</span>
                </div>
                {% endif %}
                {% if report.is_empty_netcosts_values %}
                <div class="error_list_item">
                    <img src="{% static 'images/iconizer-4201973.svg' %}" alt="" style="width: 14px; height: 14px;"><span>Прибыль считается некорректно - на странице "Склад" не указана себестоимость товаров.</span>
                </div>
                {% endif %}
                {% if not report.is_exists_tax_values %}
                <div class="error_list_item">
                    <img src="{% static 'images/iconizer-4201973.svg' %}" alt="" style="width: 14px; height: 14px;"><span>Прибыль считается некорректно - на странице "Настройки - Магазин" не указана ставка налога.</span>
                </div>
                {% endif %}
            </div>
        </div>
        <div class="abc-xyz__block">
            <div class="abc-xyz__graphs-wrapper">
                <div class="abc-graph__wrapper">
                    <div class="abc-graph__left">
                        <p>ABC КЛАССИФИКАЦИЯ ТОВАРОВ</p>
                        <canvas id="abc" width="190px" height="240px"></canvas>
                        <div class="abc-graph__left__description">
                            <div class="group-revenue__wrapper">
                                <div style="width: 16px; height: 10px; background-color: #ff8364"></div>
                                <div style="width: 16px; height: 10px; background-color: #dbdbdb"></div>
                                <div style="width: 16px; height: 10px; background-color: #c0cee0"></div>
                                <p>Выручка группы</p>
                            </div>
                            <div class="scu-count__wrapper">
                                <div class="sku-count__line"></div>
                                <p>Количество sku в группе</p>
                            </div>
                        </div>
                    </div>
                    <div class="abc-graph__right">
                        <a href="https://commery.ru/tpost/am6hs1blk1-kak-chitat-rezultati-abc-xyz-analiza" target="_blank" class="abc-graph__link" style="color: #ff8364;">как читать график</a>
                        {% for abc_report in report.abc_report %}
                        <div class="abc__info-item"
                             data-abc-group="{{ abc_report.group_abc }}"
                             data-abc-revenue="{{ abc_report.revenue_by_article }}"
                             data-abc-share="{{ abc_report.share_in_number }}"
                             {% if abc_report.group_abc == 'A' %} style="border-color: #ff8364; margin-top: 10px;" {% endif %}
                        {% if abc_report.group_abc == 'B' %}style="color: #ccc4c4" {% endif %}
                        {% if abc_report.group_abc == 'C' %}style="border-color: #c0cee0" {% endif %}
                        >
                        <h3 class="abc-info__revenue"
                            {% if abc_report.group_abc == 'A' %} style="color: #ff8364" {% endif %}
                        {% if abc_report.group_abc == 'B' %} style="color: #ccc4c4" {% endif %}
                        {% if abc_report.group_abc == 'C' %} style="color: #c0cee0" {% endif %}
                        >{{ abc_report.revenue_by_article|floatformat:"-3g" }}</h3>
                        <h3 class="abc-info__scu">{{ abc_report.share_in_number }}%</h3>
                    </div>
                    {% endfor %}
                </div>
            </div>
            <div class="abc-xyz-table__wrapper">
                <div class="abc-xyz__top">
                    <p>ABC-XYZ АНАЛИЗ</p>
                    <a href="https://commery.ru/tpost/am6hs1blk1-kak-chitat-rezultati-abc-xyz-analiza" target="_blank" class="abc-graph__link" style="color: #ff8364;">КАК ЧИТАТЬ ГРАФИК</a>
                </div>
                <div class="abc-xyz__top__designators">
                    <div style="width: 40px"></div>
                    <div class="top-designators__item">
                        <p>X</p>
                    </div>
                    <div class="top-designators__item">
                        <p>Y</p>
                    </div>
                    <div class="top-designators__item">
                        <p>Z</p>
                    </div>
                </div>
                <div class="abc-xyz__main">
                    <div class="abc-xyz__left__designators">
                        <div class="left-designators__title">
                            <img src="{% static 'images/1146181dthn.svg' %}" alt="" class="abc-xyz__image">
                            <p>Объёмы продаж</p>
                        </div>
                        <div class="left-designators__wrapper">
                            <div class="left-designator__item">
                                <p>A</p>
                            </div>
                            <div class="left-designator__item">
                                <p>B</p>
                            </div>
                            <div class="left-designator__item">
                                <p>C</p>
                            </div>
                        </div>
                    </div>
                    <div class="abc-xyz__content__wrapper">
                        <div class="abc-xyz__content__info__item">
                            <h3>ВЫСОКИЕ <br> СТАБИЛЬНЫЕ <br>  ПРОДАЖИ</h3>
                            <p>{{ report.abc_xyz_report.values.AX|default:0|floatformat:"-3g" }}</p>
                            <div class="item__evaluation">
                                <div class="cross"></div>
                                <div class="cross"></div>
                                <div class="cross"></div>
                            </div>
                        </div>
                        <div class="abc-xyz__content__info__item" style="background-color: #ffd8cc">
                            <h3>Высокие продажи, незначительные колебания спроса</h3>
                            <p>{{ report.abc_xyz_report.values.AY|default:0|floatformat:"-3g" }}</p>
                            <div class="item__evaluation">
                                <div class="cross"></div>
                                <div class="cross"></div>
                                <div class="cross"></div>
                                <div class="cross"></div>
                            </div>
                        </div>
                        <div class="abc-xyz__content__info__item" style="background-color: #f2f2f2">
                            <h3>ВЫСОКИЕ ПРОДАЖИ, ЗНАЧИТЕЛЬНЫЕ КОЛЕБАНИЯ СПРОСА</h3>
                            <p>{{ report.abc_xyz_report.values.AZ|default:0|floatformat:"-3g" }}</p>
                            <div class="item__evaluation">
                                <div class="cross"></div>
                                <div class="cross"></div>
                                <div class="cross"></div>
                                <div class="cross"></div>
                                <div class="cross"></div>
                            </div>
                        </div>
                        <div class="abc-xyz__content__info__item" style="background-color: #ffd8cc">
                            <h3>СРЕДНИЕ <br> СТАБИЛЬНЫЕ <br> ПРОДАЖИ</h3>
                            <p>{{ report.abc_xyz_report.values.BX|default:0|floatformat:"-3g" }}</p>
                            <div class="item__evaluation">
                                <div class="cross"></div>
                                <div class="cross"></div>
                            </div>
                        </div>
                        <div class="abc-xyz__content__info__item" style="background-color: #f2f2f2">
                            <h3>СРЕДНИЕ ПРОДАЖИ, НЕЗНАЧИТЕЛЬНЫЕ КОЛЕБАНИЯ СПРОСА</h3>
                            <p>{{ report.abc_xyz_report.values.BY|default:0|floatformat:"-3g" }}</p>
                            <div class="item__evaluation">
                                <div class="cross"></div>
                                <div class="cross"></div>
                                <div class="cross"></div>
                            </div>
                        </div>
                        <div class="abc-xyz__content__info__item" style="background-color: #dfe5ed">
                            <h3>СРЕДНИЕ ПРОДАЖИ, ЗНАЧИТЕЛЬНЫЕ КОЛЕБАНИЯ СПРОСА</h3>
                            <p>{{ report.abc_xyz_report.values.BZ|default:0|floatformat:"-3g" }}</p>
                            <div class="item__evaluation">
                                <div class="cross"></div>
                                <div class="cross"></div>
                                <div class="cross"></div>
                                <div class="cross"></div>
                            </div>
                        </div>
                        <div class="abc-xyz__content__info__item" style="background-color: #f2f2f2">
                            <h3>НИЗКИЕ <br> СТАБИЛЬНЫЕ <br> ПРОДАЖИ</h3>
                            <p>{{ report.abc_xyz_report.values.CX|default:0|floatformat:"-3g" }}</p>
                            <div class="item__evaluation">
                                <div class="cross"></div>
                            </div>
                        </div>
                        <div class="abc-xyz__content__info__item" style="background-color: #dfe5ed">
                            <h3>НИЗКИЕ ПРОДАЖИ, НЕЗНАЧИТЕЛЬНЫЕ КОЛЕБАНИЯ СПРОСА</h3>
                            <p>{{ report.abc_xyz_report.values.CY|default:0|floatformat:"-3g" }}</p>
                            <div class="item__evaluation">
                                <div class="cross"></div>
                                <div class="cross"></div>
                            </div>
                        </div>
                        <div class="abc-xyz__content__info__item" style="background-color: #c0cee0">
                            <h3>НИЗКИЕ ПРОДАЖИ, ЗНАЧИТЕЛЬНЫЕ КОЛЕБАНИЯ СПРОСА</h3>
                            <p>{{ report.abc_xyz_report.values.CZ|default:0|floatformat:"-3g" }}</p>
                            <div class="item__evaluation">
                                <div class="minus"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="abc-xyz__footer__info">
                    <h3>Неопределённость</h3>
                    <img src="{% static 'images/1146181.svg' %}" alt="" class="abc-xyz__image">
                </div>
                <div class="abc-xyz__footer">
                    <p>Выручка, руб.</p>
                    <span><div class="cross"></div>Рекомендации по управлению остатками</span>
                </div>
            </div>
        </div>
        <div class="abc-xyz__products__wrapper">
            <h3>Список товаров групп</h3>
            <div class="abc-xyz__products__filters__wrapper">
                <div class="abc-xyz__top__filters">
                    <button type="button" class="abc-xyz__filter__item abc-xyz__filter__item-active" data-active="true" data-group="A">A</button>
                    <button type="button" class="abc-xyz__filter__item" data-active="false" data-group="B">B</button>
                    <button type="button" class="abc-xyz__filter__item" data-active="false" data-group="C">C</button>
                </div>
                <div class="abc-xyz__bottom__filters">
                    <button type="button" class="abc-xyz__filter__item" data-active="false" data-group="AX">AX</button>
                    <button type="button" class="abc-xyz__filter__item" data-active="false" data-group="AY">AY</button>
                    <button type="button" class="abc-xyz__filter__item" data-active="false" data-group="BX">BX</button>
                    <button type="button" class="abc-xyz__filter__item" data-active="false" data-group="AZ">AZ</button>
                    <button type="button" class="abc-xyz__filter__item" data-active="false" data-group="BY">BY</button>
                    <button type="button" class="abc-xyz__filter__item" data-active="false" data-group="CX">CX</button>
                    <button type="button" class="abc-xyz__filter__item" data-active="false" data-group="BZ">BZ</button>
                    <button type="button" class="abc-xyz__filter__item" data-active="false" data-group="CY">CY</button>
                    <button type="button" class="abc-xyz__filter__item" data-active="false" data-group="CZ">CZ</button>
                </div>
            </div>
            <div class="abc-xyz__products__report__wrapper">
                <div class="products_block" id="products-block" data-products="{{ report.products_calculated_values }}" data-total-revenue="{{ report.revenue_total }}">
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.2/purify.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.5/dist/js.cookie.min.js"></script>
<script src="{% static 'reports/js/dashboard_products.js' %}"></script>
<script src="{% static 'reports/js/dashboard.js' %}"></script>
<script src="{% static 'reports/js/graphs_filtering.js' %}"></script>
{% endblock %}

