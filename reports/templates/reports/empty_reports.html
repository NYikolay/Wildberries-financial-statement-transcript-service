{% extends 'base.html' %}
{% load static %}
{% block title %} Отчёты - Commery{% endblock %}
{% block content%}
<div class="container">
    <div class="empty_reports-wrapper">
        {% if not current_api_key %}
        <div class="empty_reports-item">
            <p>Для формирования списка отчётов <br> подключите Ваш магазин</p>
            <a href="{% url 'users:companies_list' %}">Подключить</a>
        </div>
        {% else %}
        {% if current_api_key.is_active_import %}
        <div class="empty_reports-item">
            <svg class="filter" version="1.1">
                <defs>
                    <filter id="gooeyness">
                        <feGaussianBlur in="SourceGraphic" stdDeviation="10" result="blur" />
                        <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 20 -10" result="gooeyness" />
                        <feComposite in="SourceGraphic" in2="gooeyness" operator="atop" />
                    </filter>
                </defs>
            </svg>
            <div class="dots">
                <div class="dot mainDot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>
            <button id="load-btn" data-check="true" data-url="{% url 'users:check_reports_loading_status' %}" disabled style="display: none"></button>
            <p id="reports_load-info">Идёт загрузка отчётов. Пожалуйста, подождите.</p>
        </div>
        {% else %}
        <div class="empty_reports-item">
            <p id="reports_load-info">Загрузить список отчётов автоматически.</p>
            <form class="load_report-form" action="{% url 'users:send_request_for_report' %}" method="post">
                {% csrf_token %}
                <button class="load_reports-button" id="load-btn" data-check="false" type="submit">Загрузить</button>
            </form>
        </div>
        {% endif %}
        {% endif %}
    </div>
</div>
<script src="{% static 'reports/js/reports_loader.js' %}"></script>
{% endblock %}